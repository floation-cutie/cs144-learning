## UDP服务器模型

socket 通过 发送信道 & 接收信道 进行数据的发送 接收
采用C/S模式 client (多 从)       server(单 主)  从设备 主动 向 主设备进行请求， 主设备接收请求，进行解析并相应  服务器先执行，在服务器机器上等待客户端的请求

**不考虑可靠传输**

### 1.服务器编程模型

1. socket() 获取操作系统抽象数据结构的对象
2. 主动执行 等待请求 数据包如何正确的找到服务器的进程
    操作系统 `pid` 进程号 ==作为本机无法被外界识别== 通过映射 ——— 对应==端口号==
   bind() 开放端口和明确协议
3. 等待客户端请求 `recvfrom` 专门针对UDP    而`recv`会进行发送确认TCP 
   UDP不关心数据包发送对象是否存在，是否能正常通信 可能触发后续的网络层的ICMP协议，进行状态分析
4. 操作系统在程序结束后会主动释放所有资源

UDP 端口号为2字节大小  Source Port | Destination Port | Length长度(总长度含Data) 该字段作用小 | Checksum ==不可靠传输== 明文传输  

问题：客户端能否出现同个主机从不同端口向服务器发送请求?

可以！ UDP不区分数据来源端口

### 2.客户端编程模型

1. socket() 获取操作系统抽象数据结构的对象
2. bind() 不建议做 不同客户端的可用端口不统一 系统会自动分配
3. `sendto() ` 向某IP和Port发送数据包

### 3.UDP协议抓包分析

UDP从协议角度上， 只有目的端口、源端口的数据，不提供任何与 **有序   无丢失** 的传输提供帮助

TCP 面向连接的协议 	|||	  UDP面向数据报的协议 从foreign address的0.0.0.0 可以发现

UDP丢包 

1. 服务器不存在(无对应端口号)，UDP包从网络层到传输层，传输层没有缓存区存取数据
2. UDP数据包在网络传输中，信号衰减消失

UDP假丢包 服务器执行太慢导致可正常传输到对应服务器对应端口号的数据包迟迟不能执行到`recvfrom`的接口处  会进行数据包的暂时存放  

问题:进一步可能出现数据的粘包吗??  仓库内部按照数据包进行管理 [而TCP缓存区只能存放一个源地址信息，会有粘包问题]

每个数据包大小定长 超长的会截断 测试机上为704

UDP有缓存区，只是对于缓存区里的数据，传输层不能确认该数据是否有序是否丢失
==丢包== : 指的是 链路和路由选择时，会引起丢失

可靠传输  – – 超时重传 要求发送端暂存数据

